# GOROSKOPE

MVP Telegram-бот с генерацией гороскопов через OpenAI и GUI-панелью для управления.

## Структура
- `app/` — код бота
  - `bot.py` — логика Telegram-бота
  - `config.py` — загрузка настроек из `.env`
  - `horoscope.py` — знаки зодиака и промт
  - `openai_client.py` — клиент OpenAI Responses API
  - `storage.py` — простое JSON-хранилище лимитов/подписок
- `ui/control_panel.py` — Tkinter GUI для управления
- `data/bot_settings.json` — тексты приветствия и системный промт
- `data/db.json` — хранилище пользователей (создаётся автоматически, не коммитится)
- `run_bot.ps1` — запуск бота
- `run_ui.ps1` — запуск панели
- `00_setup_repo.ps1` — настройка окружения

## Быстрый старт (Windows)
1. Откройте PowerShell в корне проекта.
2. Запустите `./00_setup_repo.ps1` — создаст `.venv`, установит зависимости, положит шаблон `.env` и `data/bot_settings.json` при необходимости.
3. Отредактируйте `.env`, укажите `TELEGRAM_BOT_TOKEN`, `OPENAI_API_KEY`, `OPENAI_MODEL` (по умолчанию `gpt-4o-mini`), `ADMIN_TELEGRAM_ID`.
4. Запустите GUI командой `./run_ui.ps1` — сохраните настройки, при необходимости стартуйте/остановите бота.
5. Для прямого запуска бота используйте `./run_bot.ps1`.

## Команды бота
- `/start` — приветствие и подсказки
- `/help` — список команд
- `/today` — гороскоп на сегодня (выбор знака кнопками)
- `/week` — гороскоп на неделю (выбор знака)
- `/grant <user_id> <days>` — продлить подписку пользователю (только `ADMIN_TELEGRAM_ID`)

## Лимиты
Без подписки доступен один бесплатный прогноз в сутки. Подписка снимает лимит (`/grant <user_id> <days>`).

## Логи
Логи пишутся в `logs/bot.log`. В GUI доступен просмотр последних строк и кнопка открытия папки.

